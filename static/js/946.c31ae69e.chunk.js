"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[946],{946:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(885),c=n(791),a=n(184);function o(){return(0,a.jsx)("button",{className:"search-button btn",children:"Search"})}var u=n(235);function i(e){var t=e.onSubmit,n=(0,c.useState)(""),i=(0,r.Z)(n,2),s=i[0],f=i[1];return(0,a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==s.trim()?(t(s),f("")):u.Am.error("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",{theme:"colored"})},className:"header-form",children:[(0,a.jsx)("input",{className:"header-form__input-search",type:"text",value:s,onChange:function(e){f(e.currentTarget.value.toLowerCase())},autoComplete:"off",autoFocus:!0,placeholder:"Search movies"}),(0,a.jsx)(o,{})]})}var s=n(861),f=n(757),m=n.n(f),h=n(504),l=n(207),p=n(183);function v(e){var t=e.movieName,n=(0,c.useState)(null),o=(0,r.Z)(n,2),i=o[0],f=o[1],v=(0,c.useState)(!1),d=(0,r.Z)(v,2),x=d[0],k=d[1];return(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)(m().mark((function e(){var n,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,(0,l.Pv)(t);case 4:if(n=e.sent,!((r=n.results).length<=0)){e.next=8;break}throw new Error;case 8:f(r),k(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),u.Am.info("Image with name ".concat(t," not found \ud83d\ude22"),{theme:"colored"}),k(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),(0,a.jsxs)(a.Fragment,{children:[x&&(0,a.jsx)(p.Z,{}),i&&(0,a.jsx)("ul",{children:i.map((function(e){var n=e.original_title,r=e.id;return(0,a.jsx)("li",{children:(0,a.jsx)(h.rU,{to:"".concat(r),state:{pathname:"/movies?query=".concat(t)},children:n})},r)}))})]})}var d=n(871);function x(){var e=(0,d.TH)(),t=new URLSearchParams(e.search).get("query"),n=(0,d.s0)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{onSubmit:function(e){n("?query=".concat(e))}}),t&&(0,a.jsx)(v,{movieName:t})]})}},207:function(e,t,n){n.d(t,{ZS:function(){return f},BG:function(){return m},IV:function(){return h},lw:function(){return l},Pv:function(){return p}});var r=n(861),c=n(757),a=n.n(c),o="https://api.themoviedb.org",u="e95cb0020c8da522f774c98098c822a8";function i(){return s.apply(this,arguments)}function s(){return s=(0,r.Z)(a().mark((function e(){var t,n,r,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,fetch(t,n);case 4:if(!(r=e.sent).ok){e.next=11;break}return e.next=8,r.json();case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=Promise.reject(new Error("Not found"));case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function f(e){return i("".concat(o,"/3/movie/popular?api_key=").concat(u))}function m(e){return i("".concat(o,"/3/movie/").concat(e,"?api_key=").concat(u))}function h(e){return i("".concat(o,"/3/movie/").concat(e,"/credits?api_key=").concat(u))}function l(e){return i("".concat(o,"/3/movie/").concat(e,"/reviews?api_key=").concat(u))}function p(e){return i("".concat(o,"/3/search/movie?api_key=").concat(u,"&page=1&query=").concat(e))}}}]);
//# sourceMappingURL=946.c31ae69e.chunk.js.map